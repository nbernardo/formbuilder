<span class="top10px removeComponent lineRemover" style="display: none; border: medium none;">Remover linha</span><div style="color: black; background: white none repeat scroll 0% 0%; display: flex; min-height: 45px; margin-top: 5px;" class="formNewLine" id="formNewLine1625295381490"><span id="inputContainer_1625295381969" class="left5px displayCol"><span class="posAbsolute removeComponent" style="display: none; border: medium none;">x</span><label class="formInputLabel paddingRight10px textBold" contenteditable="false">Modelo de carro</label><input placeholder="Digite um texto" name="modeloDeCarro" class="databaseField"></span><span id="inputContainer_1625295384980" class="left5px displayCol"><span class="posAbsolute removeComponent" style="display: none; border: medium none;">x</span><label class="formInputLabel paddingRight10px textBold" contenteditable="false">Marca do carro</label><input placeholder="Digite um texto" name="marcaDoCarro" class="databaseField"></span></div><span class="top10px removeComponent lineRemover" style="display: none; border: medium none;">Remover linha</span><div style="color: black; background: white none repeat scroll 0% 0%; display: flex; min-height: 45px; margin-top: 5px;" class="formNewLine" id="formNewLine1625295383455"><span id="optionGroupContainer_1625295404165" class="left5px"><span class="posAbsolute removeComponent" style="display: none; border: medium none;">x</span><label class="formInputLabel paddingRight10px textBold" style="background: rgb(248, 248, 248) none repeat scroll 0% 0%;" contenteditable="false">Categoria</label><div class="displayRow optionGroupContainer" style="background: rgb(248, 248, 248) none repeat scroll 0% 0%;"><span class="left5px"><label class="optionLabel" contenteditable="true">Ligeiro</label><input type="radio" name="categoria" class="databaseField"></span><span class="left5px"><label class="optionLabel" contenteditable="true">SUV</label><input type="radio" name="categoria" class="databaseField"></span></div></span><span id="optionGroupContainer_1625295454239" class="left5px"><span class="posAbsolute removeComponent" style="display: none; border: medium none;">x</span><label class="formInputLabel paddingRight10px textBold" contenteditable="false">Nome do campo</label><div class="displayRow optionGroupContainer"><span class="left5px"><label class="optionLabel" contenteditable="true">Opção1</label><input type="checkbox" name="optionGroup_1625295454239"></span><span class="left5px"><label class="optionLabel" contenteditable="true">Opção2</label><input type="checkbox" name="optionGroup_1625295454239"></span></div></span></div><span class="top10px removeComponent lineRemover" style="display: none; border: medium none;">Remover linha</span><div style="color: lightgrey; background: rgb(248, 248, 248) none repeat scroll 0% 0%; min-height: 45px; margin-top: 5px;" class="formNewLine" id="formNewLine1625295429388">Arraste aqui o componente</div><button onclick='formSumit()'>Guardar</button>

<script>

function postJSONRequest({ action, callback, content }) {

    const host = "localhost:5000";
    const url = `http://${host}/newobject_1625295527420`;
    const xhr = new XMLHttpRequest();

    xhr.open("POST", `${url}/save`, true);
    xhr.setRequestHeader("Content-type","application/json");
    xhr.setRequestHeader("Access-Control-Allow-Origin","*");
    xhr.send(JSON.stringify(content));

    xhr.onload = function () {

        if (xhr.readyState == xhr.DONE) {
            callback(xhr.responseText);
        }

    }
    
}

function formSumit(){

    let content = {};
    const fields = document.getElementsByClassName("databaseField");
    for(let idx in fields) 
        if (fields[idx].nodeName)
            if (fields[idx].name != "" && (fields[idx].nodeName.toLowerCase() == "input" || fields[idx].nodeName.toLowerCase() == "select"))
                content[fields[idx].name] = fields[idx].value;

    console.log(`Data to send:`);
    console.log(content);

    postJSONRequest({action: "save", callback: (res) => console.log(res), content });

}

</script>